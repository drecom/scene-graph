{"version":3,"sources":["webpack://scene-graph-cocos-animation-rt/webpack/universalModuleDefinition","webpack://scene-graph-cocos-animation-rt/webpack/bootstrap","webpack://scene-graph-cocos-animation-rt/./src/CocosAnimationRuntime.ts","webpack://scene-graph-cocos-animation-rt/./src/index.ts"],"names":[],"mappings":"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","file":"scene-graph-cocos-animation-rt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"scene-graph-cocos-animation-rt\"] = factory();\n\telse\n\t\troot[\"scene-graph-cocos-animation-rt\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { SchemaJson, Node } from '@drecom/scene-graph-schema';\n\ntype KeyFrameProperty = {\n  [key: string]: number;\n};\n\ntype KeyFrame = {\n  frame: number;\n  value: number | KeyFrameProperty;\n  curve?: string | number[];\n};\n\nclass CocosAnimationRuntimeExtension {\n  public animation!: CocosAnimation;\n  public animationFrameTime!: number;\n  public target!: PIXI.Container;\n  public curveFuncsMap!: Map<string, EaseFunction[]>;\n\n  public fps: number = 60;\n  public paused: boolean = false;\n  public elapsedTime: number = 0;\n\n  public get spf(): number {\n    return 1.0 / this.fps;\n  }\n\n  constructor(animation: CocosAnimation, target: PIXI.Container) {\n    this.animation = animation;\n    this.target    = target;\n    this.animationFrameTime = 1.0 / this.animation.sample;\n    this.curveFuncsMap = new Map<string, EaseFunction[]>();\n\n    const properties = Object.keys(this.animation.curves);\n    for (let i = 0; i < properties.length; i++) {\n      const property = properties[i];\n\n      const curveFuncs = [];\n      const curve = this.animation.curves[property];\n      for (let j = 0; j < curve.keyFrames.length; j++) {\n        const keyFrame = curve.keyFrames[j];\n        const func = CocosAnimationRuntime.getCurveFunction(keyFrame.curve);\n        curveFuncs.push(func);\n      }\n\n      this.curveFuncsMap.set(property, curveFuncs);\n    }\n  }\n\n  public pause(): void {\n    this.paused = true;\n  }\n  public resume(): void {\n    this.paused = false;\n  }\n  public reset(): void {\n    this.elapsedTime = 0;\n  }\n\n  private getCurrentFrameIndex(keyFrames: KeyFrame[], elapsedTime: number, fps: number): number {\n    const spf = 1.0 / fps;\n\n    for (let i = keyFrames.length - 1; i >= 0; i--) {\n      // 60fps, 0.1 = 6 frames, 0.016 * 6\n      // 30fps, 0.1 = 3 frames, 0.033 * 3\n      const keyFrame = keyFrames[i];\n      const keyFrameTime = spf * (fps * keyFrame.frame);\n\n      if (keyFrameTime < elapsedTime) {\n        return i;\n      }\n    }\n\n    return -1;\n  }\n\n  public update(dt: number): void {\n    if (this.paused) {\n      return;\n    }\n\n    this.elapsedTime += dt * this.spf;\n\n    let activeCurveExists = false;\n\n    const properties = Object.keys(this.animation.curves);\n    for (let i = 0; i < properties.length; i++) {\n      const property = properties[i];\n      const curve = this.animation.curves[property];\n\n      const currentFrameIndex = this.getCurrentFrameIndex(curve.keyFrames, this.elapsedTime, this.animation.sample);\n      if (currentFrameIndex === -1 || currentFrameIndex >= curve.keyFrames.length - 1) {\n        continue;\n      }\n\n      const currentFrame = curve.keyFrames[currentFrameIndex];\n      const nextFrame    = curve.keyFrames[currentFrameIndex + 1];\n\n      const curveFuncs = this.curveFuncsMap.get(property);\n      if (!curveFuncs || curveFuncs.length == 0) {\n        continue;\n      }\n\n      const curveFunc = curveFuncs[currentFrameIndex];\n\n      const currentKeyFrameAsTime = this.animationFrameTime * (this.animation.sample * currentFrame.frame);\n\n      // time_ratio = time_from_current_key_frame / time_to_next_frame\n      const timeRatio =\n      // time_from_current_key_frame\n      (this.elapsedTime - currentKeyFrameAsTime) /\n      // time_to_next_frame = next_key_frame_as_time - current_key_frame_as_time\n      (\n        // next_key_frame_as_time\n        (this.animationFrameTime * (this.animation.sample * nextFrame.frame)) -\n        currentKeyFrameAsTime\n      );\n\n      const currentValue = currentFrame.value;\n      const targetValue  = nextFrame.value;\n\n      if (typeof currentValue === 'number') {\n        const valueDistance = (targetValue as number) - (currentValue as number);\n        (this.target as any)[property] = currentValue + valueDistance * curveFunc(timeRatio);\n      } else {\n        const keys = Object.getOwnPropertyNames(currentValue);\n        for (let j = 0; j < keys.length; j++) {\n          const key = keys[j];\n          const targetPropValue  = (targetValue as KeyFrameProperty)[key];\n          const currentPropValue = (currentValue as KeyFrameProperty)[key];\n\n          const valueDistance = targetPropValue - currentPropValue;\n          const value = curveFunc(timeRatio);\n          (this.target as any)[property][key] = currentPropValue + valueDistance * value;\n        }\n      }\n\n      activeCurveExists = true;\n    }\n\n    if (!activeCurveExists) {\n      this.paused = true;\n    }\n  }\n};\n\ntype CocosAnimation = {\n  runtime?: CocosAnimationRuntimeExtension;\n  sample: number;\n  speed: number;\n  url: string;\n  curves: {\n    [prop: string]: {\n      keyFrames: KeyFrame[];\n    };\n  }\n};\n\ndeclare module 'pixi.js' {\n  interface Container {\n    sgmed?: {\n      cocosAnimations?: CocosAnimation[]\n    }\n  }\n}\n\ntype EaseFunction = (ratio: number) => number;\n\nconst Easing: {\n  [name: string]: EaseFunction;\n} = {\n  linear: (ratio: number): number => {\n    return ratio;\n  },\n  quadOut: (ratio: number): number => {\n    return ratio * (2 - ratio);\n  }\n}\n\n\nconst tau = 2 * Math.PI;\n\nfunction crt(v: number) {\n  return (v < 0) ? -Math.pow(-v, 1 / 3) : Math.pow(v, 1 / 3);\n}\n\n\nfunction cardano(curve: number[], ratio: number) {\n  const pa = ratio;\n  const pb = ratio - curve[0];\n  const pc = ratio - curve[2];\n  const pd = ratio - 1;\n\n  // to [t^3 + at^2 + bt + c] form:\n  const pa3 = pa * 3;\n  const pb3 = pb * 3;\n  const pc3 = pc * 3;\n  const d = (-pa + pb3 - pc3 + pd);\n  const rd = 1 / d;\n  const r3 = 1 / 3;\n  const a = (pa3 - 6 * pb + pc3) * rd;\n  const a3 = a * r3;\n  const b = (-pa3 + pb3) * rd;\n  const c = pa * rd;\n  // then, determine p and q:\n  const p = (3 * b - a * a) * r3;\n  const p3 = p * r3;\n  const q = (2 * a * a * a - 9 * a * b + 27 * c) / 27;\n  const q2 = q / 2;\n  // and determine the discriminant:\n  const discriminant = q2 * q2 + p3 * p3 * p3;\n\n  // If the discriminant is negative, use polar coordinates\n  // to get around square roots of negative numbers\n  if (discriminant < 0) {\n    const mp3 = -p * r3;\n    const mp33 = mp3 * mp3 * mp3;\n    const r = Math.sqrt(mp33);\n    // compute cosphi corrected for IEEE float rounding:\n    const t = -q / (2 * r);\n    const cosphi = t < -1 ? -1 : t > 1 ? 1 : t;\n    const phi = Math.acos(cosphi);\n    const crtr = crt(r);\n    const t1 = 2 * crtr;\n    const x1 = t1 * Math.cos(phi * r3) - a3;\n    const x2 = t1 * Math.cos((phi + tau) * r3) - a3;\n    const x3 = t1 * Math.cos((phi + 2 * tau) * r3) - a3;\n\n    // choose best percentage\n    if (0 <= x1 && x1 <= 1) {\n      if (0 <= x2 && x2 <= 1) {\n        return (0 <= x3 && x3 <= 1) ? Math.max(x1, x2, x3) : Math.max(x1, x2);\n      } else {\n        return (0 <= x3 && x3 <= 1) ? Math.max(x1, x3) : x1;\n      }\n    } else {\n      if (0 <= x2 && x2 <= 1) {\n        return (0 <= x3 && x3 <= 1) ? Math.max(x2, x3) : x2;\n      } else {\n        return x3;\n      }\n    }\n  } else if (discriminant === 0) {\n    const u1 = q2 < 0 ? crt(-q2) : -crt(q2);\n    const x1 = 2 * u1 - a3;\n    const x2 = -u1 - a3;\n\n    // choose best percentage\n    if (0 <= x1 && x1 <= 1) {\n      return (0 <= x2 && x2 <= 1) ? Math.max(x1, x2) : x1;\n    } else {\n      return x2;\n    }\n  } else {\n    // one real root, and two imaginary roots\n    const sd = Math.sqrt(discriminant);\n    return crt(-q2 + sd) - crt(q2 + sd) - a3;\n  }\n}\n\nfunction createBezierByTime(controlPoints: number[]) {\n  return (ratio: number) => bezierByTime(controlPoints, ratio);\n}\n\nfunction bezierByTime(controlPoints: number[], ratio: number) {\n  const percent = cardano(controlPoints, ratio);    // t\n  // var p0y = 0;                // a\n  // const p1y = controlPoints[1]; // b\n  // const p2y = controlPoints[3]; // c\n  // var p3y = 1;                // d\n  const t1  = 1 - percent;\n  return /* 0 * t1 * t1 * t1 + */ controlPoints[1] * 3 * percent * t1      * t1 +\n         controlPoints[3] * 3 * percent * percent * t1 +\n         /* 1 * */ percent * percent * percent;\n}\n\nexport default class CocosAnimationRuntime {\n  // called internally\n  public extendRuntimeObjects(\n    _: SchemaJson,\n    nodeMap: Map<string, Node>,\n    runtimeObjectMap: Map<string, any>\n  ): void {\n    nodeMap.forEach((node, id) => {\n      if (!node.animations) return;\n\n      const container = runtimeObjectMap.get(id) as PIXI.Container;\n\n      if (!container.sgmed) {\n        container.sgmed = {};\n      }\n\n      container.sgmed.cocosAnimations = node.animations;\n\n      if (!container.sgmed.cocosAnimations) {\n        return;\n      }\n\n      for (let i = 0; i < container.sgmed.cocosAnimations.length; i++) {\n        const cocosAnimation = container.sgmed.cocosAnimations[i];\n        cocosAnimation.runtime = new CocosAnimationRuntimeExtension(cocosAnimation, container);\n      }\n    });\n  }\n\n  public filterAnimationContainer(rootContainer: PIXI.Container, vector: PIXI.Container[] = []): PIXI.Container[] {\n    if (rootContainer.sgmed && rootContainer.sgmed.cocosAnimations) {\n      vector.push(rootContainer);\n    }\n\n    for (let i = 0; i < rootContainer.children.length; i++) {\n      this.filterAnimationContainer(rootContainer.children[i] as PIXI.Container, vector);\n    }\n\n    return vector;\n  }\n\n  public static getCurveFunction(curveType?: string | number[]): EaseFunction {\n    if (!curveType) {\n      return Easing.linear;\n    }\n\n    if (typeof curveType === 'string') {\n      if (Easing.hasOwnProperty(curveType)) {\n        return Easing[curveType] as EaseFunction;\n      }\n\n      return Easing.linear;\n    }\n\n    // custom curve\n    return createBezierByTime(curveType) as EaseFunction;\n  }\n}\n","import CocosAnimationRuntime from './CocosAnimationRuntime';\n\nexport default CocosAnimationRuntime;\n"],"sourceRoot":""}